<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SongRate ‚Äî YouTube Music Rating App</title>
    <meta name="description"
        content="Rate songs playing on YouTube Music in real time. Track your ratings and analyze your listening habits.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="/icon.svg">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
</head>

<body>
    <!-- ‚îÄ‚îÄ‚îÄ Setup Wizard (shown when auth is missing) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div id="setupWizard" class="setup-wizard hidden">
        <div class="setup-container">
            <div class="setup-logo">
                <span class="logo-icon" style="font-size:40px">‚ô´</span>
                <h1 class="setup-title">SongRate Setup</h1>
                <p class="setup-subtitle">Connect your YouTube Music account to get started</p>
            </div>

            <!-- Step indicator -->
            <div class="setup-steps">
                <div class="setup-step active" id="setupStep1Indicator">
                    <span class="step-num">1</span>
                    <span class="step-label">Copy Headers</span>
                </div>
                <div class="setup-step-line"></div>
                <div class="setup-step" id="setupStep2Indicator">
                    <span class="step-num">2</span>
                    <span class="step-label">Paste</span>
                </div>
                <div class="setup-step-line"></div>
                <div class="setup-step" id="setupStep3Indicator">
                    <span class="step-num">3</span>
                    <span class="step-label">Verify</span>
                </div>
            </div>

            <!-- Step 1: Instructions -->
            <div class="setup-panel" id="setupStep1">
                <div class="setup-browser-tabs">
                    <button class="setup-tab active" data-browser="firefox" id="tabFirefox">ü¶ä Firefox</button>
                    <button class="setup-tab" data-browser="chrome" id="tabChrome">üåê Chrome / Edge</button>
                </div>

                <!-- Firefox instructions -->
                <div class="setup-instructions" id="instrFirefox">
                    <ol class="setup-steps-list">
                        <li>Open <strong>YouTube Music</strong> (<a href="https://music.youtube.com"
                                target="_blank">music.youtube.com</a>) and make sure you're <strong>logged in</strong>
                        </li>
                        <li>Open <strong>Developer Tools</strong> ‚Äî press <kbd>F12</kbd> or <kbd>Ctrl+Shift+I</kbd></li>
                        <li>Go to the <strong>Network</strong> tab</li>
                        <li>Type <code>/browse</code> in the filter bar</li>
                        <li>Click around in YouTube Music (e.g. click <strong>Library</strong>) to trigger a request
                        </li>
                        <li>Right-click the <code>browse</code> request ‚Üí <strong>Copy ‚Üí Copy Request Headers</strong>
                        </li>
                    </ol>
                </div>

                <!-- Chrome instructions -->
                <div class="setup-instructions hidden" id="instrChrome">
                    <p class="setup-note">Choose one of these methods:</p>

                    <div class="setup-method">
                        <h4>Method A ‚Äî Copy as fetch <span class="setup-recommended">Recommended</span></h4>
                        <ol class="setup-steps-list">
                            <li>Open <strong>YouTube Music</strong> (<a href="https://music.youtube.com"
                                    target="_blank">music.youtube.com</a>) and make sure you're <strong>logged
                                    in</strong></li>
                            <li>Open <strong>Developer Tools</strong> ‚Äî press <kbd>F12</kbd> or <kbd>Ctrl+Shift+I</kbd>
                            </li>
                            <li>Go to the <strong>Network</strong> tab</li>
                            <li>Type <code>/browse</code> in the filter bar</li>
                            <li>Click around in YouTube Music to trigger a request</li>
                            <li>Right-click any <code>browse?</code> request ‚Üí <strong>Copy as fetch (Node.js)</strong>
                            </li>
                        </ol>
                    </div>

                    <div class="setup-method">
                        <h4>Method B ‚Äî Manual JSON</h4>
                        <ol class="setup-steps-list">
                            <li>Follow steps 1‚Äì5 from Method A</li>
                            <li>Click a <code>browse?</code> request ‚Üí go to the <strong>Headers</strong> tab ‚Üí scroll
                                to <strong>Request Headers</strong></li>
                            <li>Copy and paste these values as JSON:
                                <pre class="setup-json-template">{
  "Cookie": "paste cookie value here",
  "Authorization": "paste auth value here",
  "X-Goog-AuthUser": "0",
  "x-origin": "https://music.youtube.com"
}</pre>
                            </li>
                        </ol>
                    </div>
                </div>

                <button class="btn-primary setup-next-btn" id="setupGoToPaste">
                    Next: Paste Headers ‚Üí
                </button>
            </div>

            <!-- Step 2: Paste -->
            <div class="setup-panel hidden" id="setupStep2">
                <label class="setup-paste-label">Paste your copied headers below:</label>
                <textarea id="setupHeadersInput" class="setup-textarea"
                    placeholder="Paste your request headers here...&#10;&#10;Supports:&#10;‚Ä¢ Firefox raw headers (right-click ‚Üí Copy Request Headers)&#10;‚Ä¢ Chrome 'Copy as fetch (Node.js)' output&#10;‚Ä¢ JSON object with Cookie, Authorization, etc."></textarea>

                <div class="setup-feedback hidden" id="setupFeedback"></div>

                <div class="setup-btn-row">
                    <button class="btn-sm" id="setupBackToInstr">‚Üê Back</button>
                    <button class="btn-primary" id="setupSubmitHeaders">Submit & Authenticate</button>
                </div>
            </div>

            <!-- Step 3: Verify -->
            <div class="setup-panel hidden" id="setupStep3">
                <div class="setup-verify-status" id="setupVerifyStatus">
                    <div class="setup-spinner"></div>
                    <p>Verifying connection‚Ä¶</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <header class="app-header">
        <div class="header-left">
            <div class="logo">
                <span class="logo-icon">‚ô´</span>
                <span class="logo-text">SongRate</span>
            </div>
        </div>
        <div class="header-right">
            <div class="connection-status" id="connectionStatus">
                <span class="status-dot"></span>
                <span class="status-text">Connecting‚Ä¶</span>
            </div>
            <div class="header-actions">
                <a href="/analytics" class="btn-icon" title="Analytics"
                    style="text-decoration:none;display:inline-flex;align-items:center;gap:4px">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 20V10" />
                        <path d="M12 20V4" />
                        <path d="M6 20v-6" />
                    </svg>
                </a>
                <button class="btn-icon" id="btnSettings" title="Settings">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
                    </svg>
                </button>
                <button class="btn-icon" id="btnExportCSV" title="Export as CSV">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    <span>CSV</span>
                </button>
                <button class="btn-icon" id="btnExportJSON" title="Export as JSON">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    <span>JSON</span>
                </button>
            </div>
        </div>
    </header>

    <!-- ‚îÄ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <main class="app-main">
        <!-- Now Playing Section -->
        <section class="now-playing-section" id="nowPlayingSection">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:4px">
                <h2 class="section-title" style="margin-bottom:0">Now Playing</h2>
                <button class="btn-sm" id="btnSearchSong" title="Search for a song to rate">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="vertical-align:-2px">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                    Search & Rate
                </button>
                <label
                    style="display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--text-muted);cursor:pointer;margin-left:8px">
                    <input type="checkbox" id="pausePollToggle"> Pause Polling
                </label>
            </div>

            <!-- Empty state -->
            <div class="now-playing-empty" id="nowPlayingEmpty">
                <div class="empty-icon">üéß</div>
                <p>Play a song on YouTube Music to get started</p>
                <p class="empty-sub">The app checks every few seconds for new tracks</p>
            </div>

            <!-- Track card + alternatives wrapper -->
            <div class="np-layout hidden" id="npLayout">
                <div class="now-playing-card" id="nowPlayingCard">
                    <div class="np-album-art-wrap">
                        <img class="np-album-art" id="npAlbumArt" src="" alt="Album artwork">
                        <div class="np-playing-indicator">
                            <span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                    <div class="np-info">
                        <h3 class="np-title" id="npTitle"></h3>
                        <p class="np-artist" id="npArtist"></p>
                        <div class="np-meta">
                            <span class="np-album" id="npAlbum"></span>
                            <span class="np-year" id="npYear"></span>
                        </div>

                        <!-- Already rated badge -->
                        <div class="np-already-rated hidden" id="npAlreadyRated">
                            <span class="rated-badge">‚òÖ Already Rated</span>
                            <span class="rated-value" id="npExistingRating"></span>
                            <button class="btn-sm btn-edit-existing" id="npEditExisting">Edit</button>
                        </div>

                        <!-- Rating input -->
                        <div class="np-rating-form" id="npRatingForm">
                            <label class="rating-label">Rate this song</label>
                            <div class="rating-input-group">
                                <input type="range" id="npRatingSlider" min="1" max="10" step="1" value="5"
                                    class="rating-slider">
                                <span class="rating-display" id="npRatingDisplay">5</span>
                                <span class="rating-range-label" id="npRangeLabel">(1‚Äì10)</span>
                            </div>
                        </div>
                        <div class="rating-extras">
                            <input type="text" id="npNotes" placeholder="Add a note (optional)" class="input-notes">
                            <input type="text" id="npTags" placeholder="Tags: e.g. chill, workout (optional)"
                                class="input-tags">
                        </div>
                        <button class="btn-primary" id="npSubmitRating">
                            <span>Save Rating</span>
                        </button>
                    </div>
                </div>

                <!-- Sidebars column (stacked) -->
                <div class="sidebars-column">
                    <!-- Related songs sidebar -->
                    <div class="alt-versions-panel" id="altVersionsPanel">
                        <h4 class="alt-versions-title">Related</h4>
                        <div class="alt-versions-list" id="altVersionsList">
                            <div class="alt-versions-loading" id="altVersionsLoading">Searching‚Ä¶</div>
                        </div>
                    </div>

                    <!-- Other Versions sidebar (album lookup) -->
                    <div class="alt-versions-panel" id="otherVersionsPanel">
                        <h4 class="alt-versions-title">Other Versions</h4>
                        <div class="alt-versions-list" id="otherVersionsList">
                            <div class="alt-versions-loading">Scanning albums‚Ä¶</div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- Stats Bar -->
        <section class="stats-bar" id="statsBar">
            <div class="stat-card">
                <span class="stat-value" id="statTotal">0</span>
                <span class="stat-label">Songs Rated</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="statAverage">‚Äî</span>
                <span class="stat-label">Avg Rating</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="statHighest">‚Äî</span>
                <span class="stat-label">Highest</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="statTopArtist">‚Äî</span>
                <span class="stat-label">Top Artist</span>
            </div>
        </section>

        <!-- Unrated / Skipped Songs Section -->
        <section class="unrated-songs-section">
            <div class="rated-header">
                <h2 class="section-title">Unrated Songs</h2>
                <div class="rated-controls">
                    <input type="text" id="unratedSearchInput" placeholder="Search unrated‚Ä¶" class="input-search">
                    <button id="btnDismissAllUnrated"
                        style="margin-left:8px;font-size:12px;padding:4px 12px;border-radius:6px;border:1px solid rgba(239,68,68,0.3);background:rgba(239,68,68,0.1);color:#f87171;cursor:pointer">Dismiss
                        All</button>
                </div>
            </div>

            <div class="rated-grid" id="unratedGrid">
                <!-- Populated by JS -->
            </div>

            <div class="rated-empty hidden" id="unratedEmpty">
                <p>No unrated songs. Songs you skip or miss will appear here.</p>
            </div>
        </section>

        <!-- Rated Songs Section -->
        <section class="rated-songs-section">
            <div class="rated-header">
                <h2 class="section-title">Rated Songs</h2>
                <div class="rated-controls">
                    <input type="text" id="searchInput" placeholder="Search songs‚Ä¶" class="input-search">
                    <select id="sortSelect" class="select-sort">
                        <option value="ratedAt-desc">Newest First</option>
                        <option value="ratedAt-asc">Oldest First</option>
                        <option value="rating-desc">Highest Rated</option>
                        <option value="rating-asc">Lowest Rated</option>
                        <option value="artist-asc">Artist A‚ÄìZ</option>
                        <option value="title-asc">Title A‚ÄìZ</option>
                        <option value="year-desc">Year (Newest)</option>
                    </select>
                </div>
            </div>

            <div class="rated-grid" id="ratedGrid">
                <!-- Populated by JS -->
            </div>

            <div class="load-more-wrap" id="loadMoreWrap" style="text-align:center;padding:16px 0">
                <span class="rated-count" id="ratedCount"
                    style="font-size:13px;color:var(--text-muted);margin-right:12px"></span>
                <button class="btn-sm" id="btnLoadMore" style="display:none">Load More</button>
            </div>

            <div class="rated-empty hidden" id="ratedEmpty">
                <p>No rated songs yet. Rate your first song above!</p>
            </div>
        </section>
    </main>

    <!-- ‚îÄ‚îÄ‚îÄ Rate Unrated Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay hidden" id="rateUnratedModal">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Rate This Song</h3>
                <button class="btn-close" id="rateUnratedClose">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="rateUnratedId">
                <div class="unrated-song-preview">
                    <img class="unrated-preview-art" id="rateUnratedArt" src="" alt="Album art">
                    <div class="unrated-preview-info">
                        <div class="unrated-preview-title" id="rateUnratedTitle"></div>
                        <div class="unrated-preview-artist" id="rateUnratedArtist"></div>
                        <div class="unrated-preview-meta" id="rateUnratedMeta"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Rating <span id="rateUnratedRangeLabel">(1‚Äì10)</span></label>
                    <div class="rating-input-group">
                        <input type="range" id="rateUnratedRating" min="1" max="10" step="1" value="5"
                            class="rating-slider">
                        <span class="rating-display" id="rateUnratedRatingDisplay">5</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <input type="text" id="rateUnratedNotes" class="input-field" placeholder="Add a note (optional)">
                </div>
                <div class="form-group">
                    <label>Tags (comma-separated)</label>
                    <input type="text" id="rateUnratedTags" class="input-field" placeholder="e.g. chill, workout">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-danger" id="rateUnratedDismiss">Dismiss</button>
                <button class="btn-primary" id="rateUnratedSave">Save Rating</button>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ Edit Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay hidden" id="editModal">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Edit Song Info</h3>
                <button class="btn-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editId">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="editTitle" class="input-field">
                </div>
                <div class="form-group">
                    <label>Artist</label>
                    <input type="text" id="editArtist" class="input-field">
                </div>
                <div class="form-group">
                    <label>Album</label>
                    <input type="text" id="editAlbum" class="input-field">
                </div>
                <div class="form-group">
                    <label>Year</label>
                    <input type="text" id="editYear" class="input-field">
                </div>
                <div class="form-group">
                    <label>Rating <span id="editRangeLabel">(1‚Äì10)</span></label>
                    <div class="rating-input-group">
                        <input type="range" id="editRating" min="1" max="10" step="1" value="5" class="rating-slider">
                        <span class="rating-display" id="editRatingDisplay">5</span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Notes</label>
                <input type="text" id="editNotes" class="input-field">
            </div>
            <div class="form-group">
                <label>Tags (comma-separated)</label>
                <input type="text" id="editTags" class="input-field">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-danger" id="editDelete">Delete</button>
            <button class="btn-primary" id="editSave">Save Changes</button>
        </div>
    </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ Settings Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay hidden" id="settingsModal">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="btn-close" id="settingsClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Rating Range</label>
                    <div class="range-config">
                        <div class="range-field">
                            <label>Min</label>
                            <input type="number" id="settingsMin" class="input-field input-sm" value="1">
                        </div>
                        <span class="range-separator">to</span>
                        <div class="range-field">
                            <label>Max</label>
                            <input type="number" id="settingsMax" class="input-field input-sm" value="10">
                        </div>
                    </div>
                    <p class="form-hint">Supports any integer range, including negative numbers</p>
                </div>
                <div class="settings-group" style="margin-top:16px">
                    <label class="settings-label">Poll pause on selection (seconds)</label>
                    <input type="number" id="settingsPollPause" class="input-field input-sm" value="10" min="1"
                        max="120" style="width:80px">
                    <p class="form-hint">How long to pause auto-detection after manually picking a song</p>
                </div>
                <div class="settings-group" style="margin-top:16px">
                    <label class="settings-label">Anti-flicker buffer size</label>
                    <input type="number" id="settingsMaxRecent" class="input-field input-sm" value="5" min="1" max="20"
                        style="width:80px">
                    <p class="form-hint">Number of recent songs to remember to prevent reverting (default 5)</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="settingsSave">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ Search Song Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay hidden" id="searchModal">
        <div class="modal-content" style="max-width:560px">
            <div class="modal-header">
                <h2>Search YouTube Music</h2>
                <button class="modal-close" id="searchModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display:flex;gap:8px;margin-bottom:16px">
                    <input type="text" id="searchSongInput" class="input-search"
                        placeholder="Search for a song, artist, or album..." style="flex:1">
                    <button class="btn-primary" id="searchSongBtn">Search</button>
                </div>
                <div id="searchLoading" class="hidden" style="text-align:center;padding:20px;color:var(--text-muted)">
                    Searching...</div>
                <div id="searchResults" class="search-results-grid"></div>
                <div id="searchEmpty" class="hidden" style="text-align:center;padding:30px;color:var(--text-muted)">No
                    results found. Try a different search.</div>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
    <script>
        // Register service worker for PWA
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("/sw.js").catch(() => { });
        }
    </script>
</body>

</html>